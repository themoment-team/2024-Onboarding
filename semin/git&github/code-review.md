# 코드리뷰

>리뷰어 : 다른 사람의 코드를 리뷰하는 사람
리뷰이 : 자신의 코드를 리뷰 받는 사람

코드 리뷰란 한 개발자가 코드를 작성하면 다른 개발자가 정해진 방법으로 **피드백**을 주고받는 과정을 말합니다.

이 과정을 통해 본인이 발견하지 못한 실수를 발견하여 Side Effect(코드 부작용)과 오류를
조기에 대응할 수 있다.

프로젝트의 컨벤션 규칙, 가이드 라인을 유지하기도 쉬워집니다.

또한 여러명의 개발자가 기술 구현 방법론을 공유하기도 합니다.

다음은 [카카오 기술 블로그](https://tech.kakao.com/2022/03/17/2022-newkrew-onboarding-codereview/)에서 제시한 코드 리뷰의 5가지 규칙입니다.

#### 1. 왜 개선이 필요한지 이유를 충분한 설명해주세요.
```js
const data = [
  {"name":"nico","age":17,"country":"Korea"},
  {"name":"Foo","age":32,"country":"England"},
  {"name":"James","age":3,"country":"USA"}
];
```
> 안좋은 리뷰
`data 말고 다른 변수명을 사용하세요`
`data 말고 userData, userInfo를 사용하세요`

> 좋은 리뷰
`data라는 이름은 현재의 자료구조가 무엇인지 그 의도를 알기가 어렵네요.
유저 정보를 담고 있는 자료구조 같은데 이와 관련된 변수명을 짓는다면
현재 정의한 자료구조가 무엇인지 그 의도를 쉽게 파악할 수 있을 것 같아요.`

개선의 이유를 구체적으로 설명하면, 리뷰이는 리뷰에 대해 충분히 납득할 수 있으며
스스로 생각하고 성장하는 기회가 됩니다.

#### 2. 답을 알려주는 대신, 스스로 고민하고 해결 방법을 선택하도록 해주세요.

1번과 이어지는 규칙입니다.
코드의 개선점을 찾아 답만 알려주는 리뷰를 하다보면,
리뷰이는 스스로 생각할 기회를 잃어, 성장할 수 없습니다.
또한 수동적인 개발자가 될 가능성이 있습니다.
스스로 고민하도록 **적당한 힌트**를 주는것이 리뷰이가
성장할 수 있는 방법입니다.

```js
const result = [];
arr.forEach(item => {
  if(item % 2 === 0) {
    result.push(item);
  }
});
```

>안좋은 리뷰
`arr.filter(item => item % 2 === 0);으로 사용하세요.`

>좋은 리뷰
`자바스크립트에는 배열에는 다양한 내장 메서드들이 존재합니다.
그중 filter 메서드를 활용해 보세요.
이 메서드를 활용하면 코드량을 줄일 수 있습니다.`

#### 3. 클린하고 일관성있는 코드를 유지 안내해주세요.
**클린코드**는 유지보수의 난이도를 결정하는 중요한 요소중 하나입니다.
코드의 가독성이 높아지고 개발의 효율성도 올라가기 때문에 코드리뷰를 할 때에도 코드를 깨끗하게 유지하도록 노력해야합니다.

```js
const checkNumber = (comNum, myNum) => {
  return myNum.reduce((prev, curr) => {
    if (comNum[curr]) return prev + 1;
    return prev;
  }, 0);
}
function calculateEarningRate(list, totalPrizeMoney, investMoney) {
  const result = [];
  for(let i=0; i < list.length; i += 1) {
    result.push((list[i] / investMoney) * 100);
  }
  return result;
}
```

다음 코드는 먼저, 함수 선언 방식이 일관되지 않습니다.
function 키워드로 함수를 정의한것과 arrow function으로 함수를 정의한것은 불필요하게 일관성을 깨뜨립니다.
또한 반복문의 구조가 `내장함수 reduce사용`과 `for문 사용`으로 나뉩니다.

>직접 적어본 리뷰
`함수를 선언하는 두가지 방법을 사용하셨는데, 특별한 이유가 아니라면 둘을 일관되게 만들어주세요.
그리고 calculateEarningRate에서도 checkNumber에서 처럼 for문이 아닌 다른 js 내장함수를 사용하여 일관되게 작성할 수 있을것 같습니다.`

>안좋은 리뷰
`함수 표현식을 사용하셨군요. reduce의 사용도 잘 활용했네요.`

>좋은 리뷰
`함수를 선언하는 두 가지 방식(함수 표현식, 함수 선언식)을 사용했는데
특별한 이유가 아니라면 함수를 선언하는 방식을 스스로 정하고 그 컨벤션 규칙을
따르도록 해보세요. 일관되게 동작하는 코드는 훨씬 보기 좋고 쉽게 수정할 수 있습니다.
그리고 reduce를 통해서 새로운 자료구조를 만든 건 잘했습니다.
하지만 같은 반복처리를 하는 과정에서 calculateEarningRate 에서
for문을 사용한 건 아쉽네요. reduce와 비슷한 방식의 다른 고차 함수를 찾아서
써보면 더 일관된 코드를 유지할 수 있을 거 같습니다.`

#### 4. 리뷰 과정이 숙제검사가 아닌 학습과정으로 느낄 수 있게 리뷰해 주세요.
코드 리뷰의 목적은 서로 생각을 공유하고, 더 깔끔한 코드를 작성하기 위함입니다.
그러나 사람에 따라 코드 리뷰를 숙제로 받아들일 수 있습니다.
따라서 리뷰이가 코드리뷰를 학습의 일부로 받아들이기 위해 피드백을 자주 주고받고, 성장하고 있다는 생각을 심어주는 것이 좋습니다.

```js
class Component {
    constructor(node) {
        this.node = node;
    }

    render(child) {
        this.node.appendChild(child);
    }
}

class Header extends Component {
    constructor(node) {
        super(node);
    }
}

class List extends Component {
    constructor(node) {
        super(node);
    }
}
```

Header, List 클래스가 Component 클래스를 상속받는 코드입니다.
자식 클래스의 constructor에서 아무 일을 하지 않고 부모 클래스를 호출만 합니다.
그리고 Component 클래스에서 선언한 메소드도 사용하지 않습니다.
이러한 무의미한 상속은 불필요하다는 것을 리뷰하고자 합니다.

>안좋은 리뷰
`클래스 상속은 필요없습니다.`

리뷰이는 향후 확장성을 고려하여 미리 클래스를 나눴을 수도 있습니다.
따라서 리뷰이의 의도를 파악하지 않은 채, 코드만 보고 단정지어선 안됩니다.
먼저 코드를 짠 의도를 물어보는 것이 좋습니다.

>좋은 리뷰
`Component 클래스를 상속 받는 건 좋네요.
그러나 자식 클래스에서 부모 클래스를 호출만 하기 때문에 모든 클래스에서
상속받는 건 오히려 중복 코드 같아 보이기도 하는데 이렇게 작성해 주신 이유가 있을까요?`

**중복코드**란 단어를 사용하요 불필요한 상속의 이유를 묻고 있습니다.
이 피드백을 보며 리뷰이는 자신이 왜 이러한 코드를 짰는지 되돌아보고,
수정해야할 부분이 있는지 고민하고 학습할 기회가 됩니다.

#### 5. 리뷰를 위한 리뷰를 하지 마세요. 피드백 할 게 없으면 칭찬해 주세요.
리뷰할 부분이 없는데 흔적을 남기기 위해 리뷰할 경우 서로 어색해지는 경우도 발생합니다.
예를 들어, 깔끔하게 짜인 코드에 다른 디자인 패턴을 권유하는 것입니다.
리뷰이 입장에서는 잘 짜인 코드임에도 불구하고 안 좋은 코드라 여기고 잘못된 방향으로 아키텍처가 설계될 수 있습니다.

따라서 리뷰할 부분이 없다면 칭찬하는것도 하나의 방법입니다.

아래는 칭찬 피드백에 대한 예시입니다.

+ 코드량이 적당해서 읽기 편하네요.
+ 많은 고민이 코드에서 엿보이네요.
+ 성능에 아주 유리한 코드라고 생각되네요.
+ 전에 코드보다 훨씬 좋아진 거 같네요.
+ 예외 처리가 꽤 꼼꼼해서 좋네요.
+ 함수, 변수명이 직관적이어서 좋네요.

#### 추가로 피해야 할것

+ 개발자의 성향을 리뷰하지 말것
각자 자신의 코드 스타일을 가지고 있으며
컨벤션에 크게 엇나가지 않는다면 다름을 인정하는것이 좋습니다.

+ 단일 커밋만 보고 리뷰하지 말것
작은 커밋이 아닌 PR전체를 보고 코드의 맥락과
작성자의 의도를 살피며 코드를 리뷰하는것이 좋습니다.
